addons:
  apt:
    packages:
    - realpath
language: python
services: docker
env:
  global:
  - MATRIX_BUILD=true
  - GITHUB_USER=joeblackwaslike
  - GITHUB_ORG=joeblackwaslike
  - DOCKER_USER=joeblackwaslike
  - DOCKER_ORG=joeblackwaslike
  # DOCKER_PASS
  - secure: "rrHx6B5aGr7KxgMjkQPcSDIsvMK2jj10BjuEV8ti3HmAFjc18rizZwJug5vhPi3csV/P1j718HKbYdu+T51LpUtxdUo7NQm3aoDkLRdd71n3kIvxF63Zr3yHvPIxY44ODjagg75PexAFA4fZzdZNJb1M2f2kWbHPMEKBLuhBC+BI+HLmecsHTkIcud1j9Y9CCN2EuuQucVBA0EMBirsAFmnqwNeW/aeQ+EtZxaPlbjXvRjYaUsTZLvqazUNr23o5IOpMftyyCvG+VV/BfwIBUCqhbYKFFm2Em40TyzLczpIIyzaOUuLjSTaxLt60YhyQrhr81fCmCpskPbOTP+qjziEE9GivQ7O811UXSxzR4fGe8D46ydPk+twgxdAg3T3DjXwMk1b4cKZyY8yIHWzRRwe8vgHp78DtYs7epLCzwCfh02er370/v62enn/1pkYoiZUvIHTkduoTEPDcucKaROcJbOmmvUlToZmtJPqCb025KArqnXTF+gAG4chschdlMnu/AozwtnQNR1t6Xi4augNMjEwXAcweOUHTTFWCWspu0MzOcbyqHFWfzv1DeRMtFRqN8g/S+h0/lASbtn/VYKuklTsBroooTRtzefnP13omm7IMFM/pCFiHpyC9i634amt6muQirMZQ25EXLrIR+jsYU3hwxkVppUC85RdHTcQ="
  # GITHUB_TOKEN
  - secure: "dILeq2QpEXmtTo5alxOIuFptHLamGYjLsFkDbsSTyqo1c9mh38LA6mkeQ94BbHA1JcevutT3yAwPiPTwZIvgYgokqSePkI/FXM7JhBAqxlfU/QYGLVuOjPPJII2esRU/p8sFZmzEoG94oH07tk5pz+yOWnTsv0bule6Xn3bej1YxHuUHElYq9xPEVaT/53axV5eKL2BajfQ4nhch5W+2FJoALXYcQjVBaTw8GoHbRzY6VnWk8tydKIVEB/ppopoXrgR7VT32K2ERv2JkQkBOJ0qbOw75qkzMkSNWgMr8aHyJcqDICj+ECzSNNb1tvJJBtqXHRKqLhMMcP8Vk0rpvbdtoMiToIdgZYzzZoqG+q/qUcAJbrhp4Ir8cyaFGoZPLpJ/+T0jX10NToT9I2DRRsXnCovMq8/NKEDk+y4i7cOm7enFCeysiOPJsv/YKgB8bqy6WuCAQTPcRq3buhEz5TRN/ZmQw/0j6spB5fhKPEuwSw41uOceZ2FOTI9Nmy4pYyiVCIyLNDKQVIWhLzmT5E0h+IOw9Tk8KoXjVTyWzeWKqoryoAZ0pguwmQ5a5Ah7gvVgOT1W+7Pci1Yj/Gpm0NBLMYwfiCYMIXW/nRBVCnau+L+7skKKyTg23WVkBOTnl+XyG/id9WdOKFmMTcMV73boJhWhBdzSFpm6bro074Z4="
  matrix:
  - RELEASE=debian/jessie
  - RELEASE=debian/stretch
notifications:
  email:
    on_success: never
    on_failure: always

before_install: source scripts/ci/environment.sh

install: make build

script: make test

after_success:
- ci-tag-build
- hub-push
- hub-update-readme
